# Question ID: q010

## Category
[Platform Basics/Authoring/Development/Maintenance]

## Question
A custom servlet will be called by the end user, but it is unauthorized.
- The dispatcher includes a filter rule to allow the path.
- The correct permissions are granted.
- The servlet path is /system/public/post.
What action must the DevOps Engineer take to make the servlet accessible?

## Options
A) Change the anonymous user name in the Apache Sling Authentication Service configuration
B) Configure the anonymous user inside of the AEM security permissions tab
C) Add a new authentication configuration for the servlet agent under /etc/servlets
D) Add the servlet path to the Apache Sling Authentication Service configuration

## Correct Answer
Add the servlet path to the Apache Sling Authentication Service configuration

## Explanation
Change the anonymous user name in the Apache Sling Authentication Service configuration

This is at the Sling framework level
Found in OSGi configuration
Controls the core anonymous user settings
This is the correct/system level way to configure anonymous access


Configure the anonymous user inside of the AEM security permissions tab

This refers to AEM's UI-based security settings
Deals with permissions for already configured users
Doesn't actually configure who the anonymous user is
More about what anonymous users can do, not who they are


Add a new authentication configuration for the servlet agent under /etc/servlets

This is incorrect/nonsensical
/etc/servlets isn't a standard location for auth configuration
Authentication isn't configured at servlet level this way


Add the servlet path to the Apache Sling Authentication Service

This would be about excluding paths from authentication
Not about configuring the anonymous user
Related to auth requirements, not user configuration

## Related Concepts
- https://experienceleaguecommunities.adobe.com/t5/adobe-experience-manager/regex-for-common-files-exclusion-from-auth-in-a-exclusion-list/m-p/260820
- [Additional resource links]

## Tags
#sling #concept-tag2

## Difficulty
[Easy/Medium/Hard]

## Notes
Let me show you how to configure this in OSGi:

1. Access the OSGi Configuration:
   - Go to AEM Web Console: `/system/console/configMgr`
   - Search for "Apache Sling Authentication Service"
   - Or direct URL: `/system/console/configMgr/org.apache.sling.auth.core.AuthenticationSupport`

2. Find the "Authentication Requirements" property:
```
Authentication Requirements:
[+] Add entry

Previous entries might look like:
-/system/sling/login
-/system/sling/cqform/defaultlogin
```

3. Add your new entry:
```
-/system/public/post
```

Important notes:
- The `-` prefix means "exclude from authentication"
- `+` prefix would mean "require authentication"
- No prefix typically means "require authentication"
- Make sure to test thoroughly after changes

Example full configuration:
```
Authentication Requirements:
-/system/sling/login
-/system/sling/cqform/defaultlogin
-/system/public/post   # Your new entry
+/system              # Ensure other system paths still require auth
```

Would you like me to create an exam question entry about this OSGi configuration?