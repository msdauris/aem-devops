# Question ID: q113

## Category
[Platform Basics/Authoring/Development/Maintenance]

## Question
The log files contain the error "Too many files", and CRX is not responding.
What should a DevOps engineer do to increase the open files limit?

## Options
A) Restart AEM 6.x with a higher number of value in start.sh --fs.file.max=value.  <br /> 
B) AEM 6.x automatically handles such a limit and increase the limit dynamically during the next restart.  <br /> 
C) Set new Java Virtual Machine limits by -Djava.fs.file-max= and restart AEM  <br /> 
D) Check the CRX process user limit for maximum open files, and run ulimit to set higher values.  <br /> 

## Correct Answer
D) Check the CRX process user limit for maximum open files, and run ulimit to set higher values.  <br /> 

## Explanation
The correct answer is:  

✅ **D) Check the CRX process user limit for maximum open files, and run ulimit to set higher values.**  

### **Explanation:**  
- The **"Too many files"** error indicates that the **operating system has hit the limit for open file descriptors**.  
- This is controlled by the **ulimit** settings in Linux/macOS systems.  
- The best approach is to check the current limit using:  
  ```bash
  ulimit -n
  ```  
- If the value is too low, it can be increased temporarily with:  
  ```bash
  ulimit -n 65535
  ```  
- For a **permanent** fix, update the **limits.conf** file (on Linux):  
  ```bash
  echo "aemuser soft nofile 65535" | sudo tee -a /etc/security/limits.conf
  echo "aemuser hard nofile 65535" | sudo tee -a /etc/security/limits.conf
  ```  
  (Replace `aemuser` with the actual AEM process user.)  
- Then, restart AEM for the changes to take effect.  

### **Why Not the Other Options?**  
❌ **A) Restart AEM 6.x with a higher number of value in start.sh --fs.file.max=value**  
- Incorrect because **AEM does not have a `--fs.file.max` parameter** in its startup script.  

❌ **B) AEM 6.x automatically handles such a limit and increases the limit dynamically during the next restart.**  
- Incorrect because **AEM cannot override OS-level file descriptor limits automatically**.  

❌ **C) Set new Java Virtual Machine limits by `-Djava.fs.file-max=` and restart AEM**  
- Incorrect because **JVM settings do not control the OS file descriptor limits**—this is managed at the OS level.  

### **Final Answer: D** ✅

## Related Concepts
- [Link to relevant concept in study-notes]
- [Additional resource links]

## Tags
#concept-tag1 #concept-tag2

## Difficulty
[Easy/Medium/Hard]

## Notes
[Personal notes or observations about this question]