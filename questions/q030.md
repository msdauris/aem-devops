# Question ID: q030

## Category
[Platform Basics/Authoring/Development/Maintenance]

## Question
A client is submitting a form that contains a CSRF token that is passed using the CSRF-Token HTT header. When looking at the web server access logs the header is printed out, but on the AEM instance the value is not present in the request.

What should the DevOps Engineer configure to make the values available on the AEM instance?

## Options
A) Add the /clientheaders { "CSRF-Token" } in the dispatcher configuration  <br /> 
B) Add X-Forwarded-Header: CSRF-Token in the virtual host configuration  <br /> 
C) Add Header set CSRF-Token in the virtual host configuration <br /> 
D) Add /filter /0001{/type "allow" /glob "CSRF-Token" } in the dispatcher configuration  <br /> 

## Correct Answer
A) Add the /clientheaders { "CSRF-Token" } in the dispatcher configuration 

## Explanation
Given that we see the CSRF token in access logs but not in AEM, option A `/clientheaders { "CSRF-Token" }` is correct because:

1. Location of issue:
- Token visible in web server logs
- Not reaching AEM
- Indicates dispatcher filtering

2. Solution needed:
- Must pass header through dispatcher
- Requires clientheaders configuration
- Allows specific header forwarding

Adding to dispatcher.any:
```
/clientheaders {
  "CSRF-Token"
}
```

This explicitly tells dispatcher to forward the CSRF-Token header to AEM, resolving the missing token issue.

## Related Concepts
- [Link to relevant concept in study-notes]
- [Additional resource links]

## Tags
#concept-tag1 #concept-tag2

## Difficulty
[Easy/Medium/Hard]

## Notes
These options deal with CSRF (Cross-Site Request Forgery) token configuration in AEM dispatcher:

A) `/clientheaders { "CSRF-Token" }`
- Allows CSRF token through dispatcher
- Proper location in dispatcher.any
- Correct format for client headers

B) `X-Forwarded-Header: CSRF-Token`
- Incorrect syntax
- Wrong location
- Not proper CSRF configuration

C) `Header set CSRF-Token`
- Incorrect approach
- Missing value
- Not dispatcher-specific

D) `/filter /0001{/type "allow" /glob "CSRF-Token" }`
- Wrong approach
- Filter rules are for URLs
- Not for header configuration

Correct answer is A because:
- Properly configures dispatcher to pass CSRF token
- Uses correct dispatcher.any syntax
- Enables necessary security header forwarding
- Located in correct configuration section